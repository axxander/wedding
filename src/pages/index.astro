---
import BaseLayout from "../layouts/BaseLayout.astro";
import Hero from "../components/Hero.astro";
import PhotoCard from "../components/PhotoCard.astro";
import CTA from "../components/CTA.astro";
import VeneueCard from "../components/VeneueCard.astro";

const images = [
  "/alex-and-meg-image1.jpg",
  "/alex-and-meg-image2.jpg",
  "/alex-and-meg-image3.jpg",
  "/alex-and-meg-image4.jpg",
];

const interval = 0.5;
const duration = images.length * interval;
---

<BaseLayout title="Megan & Alex - Wedding">
  <Hero title="Megan & Alex are tying the knot" />

  <section class="py-12 md:py-16">
    <div
      class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 overflow-hidden"
    >
      <div class="flex flex-col gap-4 md:gap-8">
        <div class="flex flex-col gap-4 sm:flex-row md:gap-8">
          <VeneueCard
            label="Ceremony"
            venueName="Kelmarsh Hall"
            venueUrl="https://kelmarsh.com/"
            addressLine1="Kelmarsh"
            addressLine2="Northamptonshire, NN6 9LY"
            time="12:30"
          />

          <VeneueCard
            label="Evening"
            venueName="Kelmarsh Hall"
            venueUrl="https://kelmarsh.com/"
            addressLine1="Kelmarsh"
            addressLine2="Northamptonshire, NN6 9LY"
            time="19:30"
          />
        </div>
        <CTA
          href="https://tally.so/embed/vGeAev?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=1"
          >I'LL BE THERE
        </CTA>
      </div>

      <div class="relative w-full aspect-3/4 overflow-hidden">
        {
          images.map((src, i) => (
            <img
              src={src}
              class="absolute inset-0 w-full h-full object-cover opacity-0 first:opacity-100 animate-flick"
              style={`animation-delay: ${i * interval}s; animation-duration: ${duration}s;`}
            />
          ))
        }
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  @keyframes flick {
    0% {
      opacity: 1;
    }
    25% {
      opacity: 1;
    } /* visible for exactly 1/N of the cycle */
    25.01% {
      opacity: 0;
    } /* instant off, no fade */
    100% {
      opacity: 0;
    }
  }
  .animate-flick {
    animation-name: flick;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
  }
</style>
